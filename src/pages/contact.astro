---
import BaseLayout from '../layouts/BaseLayout.astro';
import SectionHeader from '../components/SectionHeader.astro';
---
<BaseLayout title="Contact" description="Reach out to Thomas Patsanis for collaborations, projects, or ski stories.">
  <section class="grid gap-16 lg:grid-cols-2">
    <div>
      <SectionHeader title="Let’s Build (or Ride)" subtitle="Contact" />
      <p class="text-base text-[var(--muted)]" data-animate>
        Need a full-stack dev who can chart new paths, a ski instructor who speaks in flow states, or someone to battle
        Sith-grade bugs with a grin? Drop a note—this form is demo mode, yet my real inbox is always open.
      </p>
      <form id="contact-form" class="mt-10 space-y-4" novalidate>
        <div class="frosted-panel space-y-4 border border-white/10 p-6">
          <input type="hidden" name="access_key" value="1bf4dbd7-a13b-4ce8-99e1-6ffe367942d1" />
          <label class="block" data-animate>
            <span class="text-sm uppercase tracking-[0.4em] text-[var(--muted)]">Name</span>
            <input
              type="text"
              name="name"
              class="mt-2 w-full rounded-2xl border border-white/15 bg-surface/10 px-4 py-3 text-[var(--text)] outline-none transition focus:border-[var(--accent)] focus:ring-2 focus:ring-[var(--accent)]/40"
              placeholder="Padawan or Partner"
              required
            />
          </label>
          <label class="block" data-animate>
            <span class="text-sm uppercase tracking-[0.4em] text-[var(--muted)]">Email</span>
            <input
              type="email"
              name="email"
              class="mt-2 w-full rounded-2xl border border-white/15 bg-surface/10 px-4 py-3 text-[var(--text)] outline-none transition focus:border-[var(--accent)] focus:ring-2 focus:ring-[var(--accent)]/40"
              placeholder="you@rebellion.dev"
              required
            />
          </label>
          <label class="block" data-animate>
            <span class="text-sm uppercase tracking-[0.4em] text-[var(--muted)]">Message</span>
            <textarea
              name="message"
              rows="5"
              class="mt-2 w-full rounded-2xl border border-white/15 bg-surface/10 px-4 py-3 text-[var(--text)] outline-none transition focus:border-[var(--accent)] focus:ring-2 focus:ring-[var(--accent)]/40"
              placeholder="Let’s plan our next release or alpine mission."
              required
            ></textarea>
          </label>
          <button type="submit" class="btn-primary">Send Message</button>
          <p id="form-status" class="text-sm text-[var(--muted)]"></p>
        </div>
      </form>
    </div>
    <div class="space-y-6">
      <SectionHeader title="Signal Boost" subtitle="Social" />
      <div class="grid gap-6" data-animate>
        <a class="frosted-panel hover-card flex items-center justify-between border border-white/10 p-6" href="https://github.com/tompats" target="_blank" rel="noreferrer">
          <div>
            <p class="text-xs uppercase tracking-[0.4em] text-[var(--muted)]">GitHub</p>
            <p class="text-xl font-semibold text-[var(--text)]">/tompats</p>
          </div>
          <span class="text-[var(--accent)]">↗</span>
        </a>
        <a class="frosted-panel hover-card flex items-center justify-between border border-white/10 p-6" href="https://www.linkedin.com/in/thomas-patsanis/" target="_blank" rel="noreferrer">
          <div>
            <p class="text-xs uppercase tracking-[0.4em] text-[var(--muted)]">LinkedIn</p>
            <p class="text-xl font-semibold text-[var(--text)]">@thomas-patsanis</p>
          </div>
          <span class="text-[var(--accent)]">↗</span>
        </a>
        <a class="frosted-panel hover-card flex items-center justify-between border border-white/10 p-6" href="mailto:hello@tompats.dev">
          <div>
            <p class="text-xs uppercase tracking-[0.4em] text-[var(--muted)]">Email</p>
            <p class="text-xl font-semibold text-[var(--text)]">hello@tompats.dev</p>
          </div>
          <span class="text-[var(--accent)]">↗</span>
        </a>
      </div>
      <div class="rounded-3xl border border-dashed border-white/15 p-6" data-animate>
        <p class="text-sm text-[var(--muted)]">
          Bonus: I often mentor devs from gondola rides or alpine cafes. Ask about the chairlift office hours—it keeps
          the ideas fresh.
        </p>
      </div>
    </div>
  </section>
  <script type="module" lang="ts">
    const formElement = document.getElementById('contact-form');
    const statusElement = document.getElementById('form-status');

    if (formElement instanceof HTMLFormElement && statusElement instanceof HTMLParagraphElement) {
      formElement.addEventListener('submit', async (event) => {
        event.preventDefault();

        const data = new FormData(formElement);
        const name = String(data.get('name') ?? '').trim();
        const email = String(data.get('email') ?? '').trim();
        const message = String(data.get('message') ?? '').trim();

        if (!name || !email || !message) {
          statusElement.textContent = 'Please complete all fields before sending.';
          statusElement.classList.remove('text-etherium');
          return;
        }

        try {
          const response = await fetch('https://api.web3forms.com/submit', {
            method: 'POST',
            body: data,
          });
          const result = await response.json();
          const isSuccess = Boolean(result && typeof result === 'object' && result['success']);

          if (response.ok && isSuccess) {
            statusElement.textContent = 'Message sent — check your inbox soon!';
            statusElement.classList.add('text-etherium');
            formElement.reset();
          } else {
            statusElement.textContent = 'Something went wrong. Try again in a bit.';
            statusElement.classList.remove('text-etherium');
          }
        } catch (error) {
          statusElement.textContent = 'Network error. Please try again.';
          statusElement.classList.remove('text-etherium');
        }
      });
    }
  </script>
</BaseLayout>
